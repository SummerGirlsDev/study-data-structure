# 해시 탐색
**함수**(해시함수)를 사용해 데이터를 보관하고 탐색한다.
> **데이터의 내용**과 **데이터가 저장되는 장소**를 **연관**지어
 극히 짧은 시간 안에 탐색을 할 수 있도록 고안된 **탐색 알고리즘**이다.
---
## 해시함수란?
> 임의의 길이의 데이터를 **고정된 길이**의 데이터로 **매핑**하는 함수이다.

**해시 함수**에 의해 얻어지는 값들을 모두 **해시**라고 한다.
+ <span style="font-size:20px; background-color:#fff0a6;">**해시 함수**는 입력값이 같을 경우 **항상 같은 출력값**을 가진다.</span>

이러한 특징 때문에 암호학, 해시 테이블 자료구조 등에서 사용된다.

#### 해시 충돌
> **해시 충돌**은 해시 함수가 **서로 다른 입력값**에 대해 **같은 출력 값**을 가지는 상황을 말한다.

ex ) 바나나 => 고양이, 사과 => 고양이 
따라서 **좋은 해시 함수**를 사용해 이런 충돌을 줄이거나,
충돌이 일어났을 **예외를 처리**해주어야한다.

---
## 해시 탐색 알고리즘
해시 탐색을 위해서는 두 가지 알고리즘이 필요하다

0. **해시 함수**
```js
// 간단한 해시함수를 사용한다.
function hash(data){
  // 데이터를 받으면 11로 나눈 나머지 값을 리턴한다.
  return data % 11;
}
```

1. **해시 함수로 데이터를 저장하는 알고리즘**
  + 해시 함수로 데이터를 저장할 때는 입력 데이터의 개수 n개보다 약 1.5 ~ 2배 정도의 **저장 공간을 미리** 만들어둔다.

  + **해시 충돌 예외 처리**를 해준다.
    아래 코드에서는 충돌이 일어날 경우, 바로 다음 배열 공간에 저장하도록 처리를 해준다.
  ```js
  function hashSave(arr){
  // 1. 해시함수로 데이터를 저장할 때는 기존 데이터 공간보다
  // 약 1.5배~2배 정도 공간을 만들어둔다.
  // 만든 저장배열에 값이 없다는 의미로 null을 채워놓는다.
  let hashArr = new Array(Math.floor(arr.length * 1.5)).fill(null);

  // 2. 배열에 데이터 저장하기
  for(let i=0; i< arr.length; i++){
    // 해시함수를 사용해 첨자(idx)를 가져온다.
    let idx = hash(arr[i]);
    // 단, 좋지않은 해시함수를 사용할 경우.
    // 데이터가 충돌이 날 수있다.
    // 따라서, 
    // 2-1. hashArr[idx]에 값이 없을 경우 데이터를 저장한다
    if(hashArr[idx] === null){
      hashArr[idx] = arr[i]; 
      // console.log('null인 경우', i ,hashArr);
    }
    else{
    // 2-2.값이 있을 경우 == 충돌이 난 경우
    // 다음 방에 데이터를 저장시켜준다. 
      hashArr[hash(idx + 1)] = arr[i];
      // console.log('null이 아닌경우 -', i ,hashArr)
    }
  }  
  return hashArr;
}
  ```

2. **해시 함수로 데이터를 검색하는 알고리즘**
  + 데이터를 찾을 때도 **해시 함수**를 사용해 찾는다.
  + 해시 예외 처리를 다음 배열 공간에 저장하는 방식을 선택했기 때문에, 만약 해시 함수로 한번에 찾지 못한 경우, 다음 배열 방을 탐색한다. 
```js
  // 해시함수로 데이터 찾기
function hashSearch( hashArr , value){
  // 1. 찾을 값에 해시함수를 적용해 첨자(idx)를 얻어온다
  let idx = hash(value);
  // 2. 종료 조건 - 값을 찾으면 탈출
  for(let i=0; i<hashArr.length; i++){
    if(hashArr[idx] === value){
      return `${idx}번째에 데이터 ${hashArr[idx]}가 존재합니다.`
    }else{
      // 같지 않으면 value + 1을 해서 다시 찾는다
      idx = hash(value + 1);
    }
  }
  return '데이터가 존재하지 않습니다.';
}
```